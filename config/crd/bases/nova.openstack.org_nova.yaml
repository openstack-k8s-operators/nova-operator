---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.9.2
  creationTimestamp: null
  name: nova.nova.openstack.org
spec:
  group: nova.openstack.org
  names:
    kind: Nova
    listKind: NovaList
    plural: nova
    singular: nova
  scope: Namespaced
  versions:
  - name: v1beta1
    schema:
      openAPIV3Schema:
        description: Nova is the Schema for the nova API
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: NovaSpec defines the desired state of Nova
            properties:
              apiDBSelector:
                additionalProperties:
                  type: string
                description: APIDBSelector to select the DB Service instance used
                  for the Nova API DB. If not provided the the default DB Service
                  of the deployment will be used for the Nova API DB.
                type: object
              apiDatabaseUser:
                default: nova
                description: APIDatabaseUser - username to use when accessing the
                  API DB
                type: string
              apiMessageBusSelector:
                additionalProperties:
                  type: string
                description: APIMessageBusSelector to select the Message Bus Service
                  instance used by the Nova top level services to communicate. If
                  not provided then the deployment's default Message Bus instance
                  will be used.
                type: object
              apiMessageBusUser:
                default: nova
                description: APIMessageBusUser - username to use when accessing the
                  API message bus
                type: string
              apiServiceTemplate:
                description: APIServiceTemplate - define the nova-api service
                properties:
                  apiDatabaseHostname:
                    description: 'NOTE(gibi): This should be Required, see notes in
                      KeystoneAuthURL APIDatabaseHostname - hostname to use when accessing
                      the API DB'
                    type: string
                  apiDatabaseUser:
                    default: nova
                    description: APIDatabaseUser - username to use when accessing
                      the API DB
                    type: string
                  apiMessageBusHostname:
                    description: 'NOTE(gibi): This should be Required, see notes in
                      KeystoneAuthURL APIMessageBusHostname - hostname to use when
                      accessing the API message bus'
                    type: string
                  apiMessageBusUser:
                    default: nova
                    description: APIMessageBusUser - username to use when accessing
                      the API message bus
                    type: string
                  containerImage:
                    description: The service specific Container Image URL
                    type: string
                  customServiceConfig:
                    default: '# add your customization here'
                    description: CustomServiceConfig - customize the service config
                      using this parameter to change service defaults, or overwrite
                      rendered information using raw OpenStack config format. The
                      content gets added to to /etc/<service>/<service>.conf.d directory
                      as custom.conf file.
                    type: string
                  debug:
                    description: Debug - enable debug for different deploy stages.
                      If an init container is used, it runs and the actual action
                      pod gets started with sleep infinity
                    properties:
                      preserveJobs:
                        default: false
                        description: PreserveJobs - do not delete jobs after they
                          finished e.g. to check logs
                        type: boolean
                      stopDBSync:
                        default: false
                        description: 'StopDBSync allows stopping the init container
                          before running db sync to apply the DB schema QUESTION(gibi):
                          Not all CR will run dbsync, should we have per CR Debug
                          struct or keep this generic one and ignore fields in the
                          controller that are not applicable'
                        type: boolean
                      stopService:
                        default: false
                        description: 'StopService allows stopping the service container
                          before staring the openstack service binary QUESTION(gibi):
                          Not all CR will run a service, should we have per CR Debug
                          struct or keep this generic one and ignore fields in the
                          controller that are not applicable'
                        type: boolean
                    type: object
                  defaultConfigOverwrite:
                    additionalProperties:
                      type: string
                    description: ConfigOverwrite - interface to overwrite default
                      config files like e.g. logging.conf or policy.json. But can
                      also be used to add additional files. Those get added to the
                      service config dir in /etc/<service> .
                    type: object
                  keystoneAuthURL:
                    description: 'KeystoneAuthURL - the URL that the nova-api service
                      can use to talk to keystone NOTE(gibi): This is made optional
                      here to allow reusing the NovaAPISpec struct in the Nova CR
                      for the apiServiceTemplate field where this information is not
                      yet known. We could make this required via multiple options:
                      a) create a NovaAPITemplate that duplicates NovaAPISpec without
                      this field. Use NovaAPITemplate as type for apiServiceTemplate
                      in NovaSpec. b) do a) but pull out a the fields to a base struct
                      that are used in both NovaAPISpec and NovaAPITemplate c) add
                      a validating webhook here that runs only when NovaAPI CR is
                      created and does not run when Nova CR is created and make this
                      field required via that webhook.'
                    type: string
                  nodeSelector:
                    additionalProperties:
                      type: string
                    description: NodeSelector to target subset of worker nodes running
                      this service
                    type: object
                  passwordSelectors:
                    description: PasswordSelectors - Field names to identify the passwords
                      from the Secret
                    properties:
                      apiDatabase:
                        default: NovaAPIDatabasePassword
                        description: APIDatabase - the name of the field to get the
                          API DB password from the Secret
                        type: string
                      apiMessageBus:
                        default: NovaAPIMessageBusPassword
                        description: APIMessageBus - the name of the field to get
                          the API message bus password from the Secret
                        type: string
                      cellDatabase:
                        description: CellDatabase - the name of the field to get the
                          Cell DB password from the Secret
                        type: string
                      cellMessageBus:
                        description: CellMessageBus - the name of the field to get
                          the API message bus password from the Secret
                        type: string
                      service:
                        default: NovaPassword
                        description: Service - Selector to get the keystone service
                          user password from the Secret
                        type: string
                    type: object
                  replicas:
                    default: 1
                    description: Replicas of the service to run
                    format: int32
                    maximum: 32
                    minimum: 0
                    type: integer
                  resources:
                    description: Resources - Compute Resources required by this service
                      (Limits/Requests). https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/
                    properties:
                      limits:
                        additionalProperties:
                          anyOf:
                          - type: integer
                          - type: string
                          pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                          x-kubernetes-int-or-string: true
                        description: 'Limits describes the maximum amount of compute
                          resources allowed. More info: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/'
                        type: object
                      requests:
                        additionalProperties:
                          anyOf:
                          - type: integer
                          - type: string
                          pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                          x-kubernetes-int-or-string: true
                        description: 'Requests describes the minimum amount of compute
                          resources required. If Requests is omitted for a container,
                          it defaults to Limits if that is explicitly specified, otherwise
                          to an implementation-defined value. More info: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/'
                        type: object
                    type: object
                  secret:
                    description: Secret is the name of the Secret instance containing
                      password information for the nova-api sevice.
                    type: string
                  serviceUser:
                    default: nova
                    description: ServiceUser - optional username used for this service
                      to register in keystone
                    type: string
                required:
                - containerImage
                type: object
              cellTemplates:
                additionalProperties:
                  description: NovaCellSpec defines the desired state of NovaCell
                  properties:
                    apiDatabaseHostname:
                      description: 'APIDatabaseHostname - hostname to use when accessing
                        the API DB. If not provided then upcalls will be disabled.
                        This filed is Required for cell0. TODO(gibi): Add a webhook
                        to validate cell0 constraint'
                      type: string
                    apiDatabaseUser:
                      default: nova
                      description: APIDatabaseUser - username to use when accessing
                        the API DB
                      type: string
                    apiMessageBusHostname:
                      description: 'APIMessageBusHostname - hostname to use when accessing
                        the API message bus. If not provided then upcalls will be
                        disabled. This field is Required for cell0. TODO(gibi): Add
                        a webhook to validate cell0 constraint.'
                      type: string
                    apiMessageBusUser:
                      default: nova
                      description: APIMessageBusUser - username to use when accessing
                        the API message bus
                      type: string
                    cellDatabaseHostname:
                      description: 'NOTE(gibi): This should be Required, see notes
                        in KeystoneAuthURL CellDatabaseHostname - hostname to use
                        when accessing the cell DB'
                      type: string
                    cellDatabaseUser:
                      default: nova
                      description: CellDatabaseUser - username to use when accessing
                        the cell DB
                      type: string
                    cellMessageBusHostname:
                      description: 'NOTE(gibi): This should be Required, see notes
                        in KeystoneAuthURL CellMessageBusHostname - hostname to use
                        when accessing the cell message bus'
                      type: string
                    cellMessageBusUser:
                      default: nova
                      description: CellMessageBusUser - username to use when accessing
                        the cell message bus
                      type: string
                    cellName:
                      description: CellName is the name of the Nova Cell. The value
                        "cell0" has a special meaning. The "cell0" Cell cannot have
                        compute nodes associated and the conductor in this cell acts
                        as the super conductor for all the cells in the deployment.
                      type: string
                    conductorServiceTemplate:
                      description: ConductorServiceTemplate - defines the cell conductor
                        deployment for the cell
                      properties:
                        apiDatabaseHostname:
                          description: 'APIDatabaseHostname - hostname to use when
                            accessing the API DB. If not provided then upcalls will
                            be disabled. This filed is Required for cell0. TODO(gibi):
                            Add a webhook to validate cell0 constraint'
                          type: string
                        apiDatabaseUser:
                          default: nova
                          description: APIDatabaseUser - username to use when accessing
                            the API DB
                          type: string
                        apiMessageBusHostname:
                          description: 'APIMessageBusHostname - hostname to use when
                            accessing the API message bus. If not provided then upcalls
                            will be disabled. This filed is Required for cell0. TODO(gibi):
                            Add a webhook to validate cell0 constraint.'
                          type: string
                        apiMessageBusUser:
                          default: nova
                          description: APIMessageBusUser - username to use when accessing
                            the API message bus
                          type: string
                        cellDatabaseHostname:
                          description: 'NOTE(gibi): This should be Required, see notes
                            in KeystoneAuthURL CellDatabaseHostname - hostname to
                            use when accessing the cell DB'
                          type: string
                        cellDatabaseUser:
                          default: nova
                          description: CellDatabaseUser - username to use when accessing
                            the cell DB
                          type: string
                        cellMessageBusHostname:
                          description: 'NOTE(gibi): This should be Required, see notes
                            in KeystoneAuthURL CellMessageBusHostname - hostname to
                            use when accessing the cell message bus'
                          type: string
                        cellMessageBusUser:
                          default: nova
                          description: CellMessageBusUser - username to use when accessing
                            the cell message bus
                          type: string
                        cellName:
                          description: CellName is the name of the Nova Cell this
                            conductor belongs to.
                          type: string
                        containerImage:
                          description: The service specific Container Image URL
                          type: string
                        customServiceConfig:
                          default: '# add your customization here'
                          description: CustomServiceConfig - customize the service
                            config using this parameter to change service defaults,
                            or overwrite rendered information using raw OpenStack
                            config format. The content gets added to to /etc/<service>/<service>.conf.d
                            directory as custom.conf file.
                          type: string
                        debug:
                          description: Debug - enable debug for different deploy stages.
                            If an init container is used, it runs and the actual action
                            pod gets started with sleep infinity
                          properties:
                            preserveJobs:
                              default: false
                              description: PreserveJobs - do not delete jobs after
                                they finished e.g. to check logs
                              type: boolean
                            stopDBSync:
                              default: false
                              description: 'StopDBSync allows stopping the init container
                                before running db sync to apply the DB schema QUESTION(gibi):
                                Not all CR will run dbsync, should we have per CR
                                Debug struct or keep this generic one and ignore fields
                                in the controller that are not applicable'
                              type: boolean
                            stopService:
                              default: false
                              description: 'StopService allows stopping the service
                                container before staring the openstack service binary
                                QUESTION(gibi): Not all CR will run a service, should
                                we have per CR Debug struct or keep this generic one
                                and ignore fields in the controller that are not applicable'
                              type: boolean
                          type: object
                        defaultConfigOverwrite:
                          additionalProperties:
                            type: string
                          description: ConfigOverwrite - interface to overwrite default
                            config files like e.g. logging.conf or policy.json. But
                            can also be used to add additional files. Those get added
                            to the service config dir in /etc/<service> .
                          type: object
                        keystoneAuthURL:
                          description: 'KeystoneAuthURL - the URL that the nova-conductor
                            service can use to talk to keystone NOTE(gibi): This is
                            made optional here to allow reusing the NovaConductorSpec
                            struct in the Nova CR via the NovaCell CR where this information
                            is not yet known. We could make this required via multiple
                            options: a) create a NovaConductorTemplate that duplicates
                            NovaConductorSpec without this field. Use NovaCondcutorTemplate
                            in NovaCellSpec. b) do a) but pull out a the fields to
                            a base struct that are used in both NovaConductorSpec
                            and NovaCondcutorTemplate c) add a validating webhook
                            here that runs only when NovaConductor CR is created and
                            does not run when Nova CR is created and make this field
                            required via that webhook.'
                          type: string
                        nodeSelector:
                          additionalProperties:
                            type: string
                          description: NodeSelector to target subset of worker nodes
                            running this service
                          type: object
                        passwordSelectors:
                          description: PasswordSelectors - Field names to identify
                            the passwords from the Secret
                          properties:
                            apiDatabase:
                              default: NovaAPIDatabasePassword
                              description: APIDatabase - the name of the field to
                                get the API DB password from the Secret
                              type: string
                            apiMessageBus:
                              default: NovaAPIMessageBusPassword
                              description: APIMessageBus - the name of the field to
                                get the API message bus password from the Secret
                              type: string
                            cellDatabase:
                              description: CellDatabase - the name of the field to
                                get the Cell DB password from the Secret
                              type: string
                            cellMessageBus:
                              description: CellMessageBus - the name of the field
                                to get the API message bus password from the Secret
                              type: string
                            service:
                              default: NovaPassword
                              description: Service - Selector to get the keystone
                                service user password from the Secret
                              type: string
                          type: object
                        replicas:
                          default: 1
                          description: Replicas of the service to run
                          format: int32
                          maximum: 32
                          minimum: 0
                          type: integer
                        resources:
                          description: Resources - Compute Resources required by this
                            service (Limits/Requests). https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/
                          properties:
                            limits:
                              additionalProperties:
                                anyOf:
                                - type: integer
                                - type: string
                                pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                x-kubernetes-int-or-string: true
                              description: 'Limits describes the maximum amount of
                                compute resources allowed. More info: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/'
                              type: object
                            requests:
                              additionalProperties:
                                anyOf:
                                - type: integer
                                - type: string
                                pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                x-kubernetes-int-or-string: true
                              description: 'Requests describes the minimum amount
                                of compute resources required. If Requests is omitted
                                for a container, it defaults to Limits if that is
                                explicitly specified, otherwise to an implementation-defined
                                value. More info: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/'
                              type: object
                          type: object
                        secret:
                          description: Secret is the name of the Secret instance containing
                            password information for the nova-conductor service.
                          type: string
                        serviceUser:
                          default: nova
                          description: ServiceUser - optional username used for this
                            service to register in keystone
                          type: string
                      required:
                      - containerImage
                      type: object
                    debug:
                      description: Debug - enable debug for different deploy stages.
                        If an init container is used, it runs and the actual action
                        pod gets started with sleep infinity
                      properties:
                        preserveJobs:
                          default: false
                          description: PreserveJobs - do not delete jobs after they
                            finished e.g. to check logs
                          type: boolean
                        stopDBSync:
                          default: false
                          description: 'StopDBSync allows stopping the init container
                            before running db sync to apply the DB schema QUESTION(gibi):
                            Not all CR will run dbsync, should we have per CR Debug
                            struct or keep this generic one and ignore fields in the
                            controller that are not applicable'
                          type: boolean
                        stopService:
                          default: false
                          description: 'StopService allows stopping the service container
                            before staring the openstack service binary QUESTION(gibi):
                            Not all CR will run a service, should we have per CR Debug
                            struct or keep this generic one and ignore fields in the
                            controller that are not applicable'
                          type: boolean
                      type: object
                    keystoneAuthURL:
                      description: 'KeystoneAuthURL - the URL that the service in
                        the cell can use to talk to keystone NOTE(gibi): This is made
                        optional here to allow reusing the NovaCellSpec struct in
                        the Nova CR for the cellTemplates field where this information
                        is not yet known. We could make this required via multiple
                        options: a) create a NovaCellTemplate that duplicates NovaCellSpec
                        without this field. Use NovaCellTemplate as type for cellTemplates
                        in NovaSpec. b) do a) but pull out a the fields to a base
                        struct that are used in both NovaCellSpec and NovaCellTemplate
                        c) add a validating webhook here that runs only when NovaCell
                        CR is created and does not run when Nova CR is created and
                        make this field required via that webhook.'
                      type: string
                    metadataServiceTemplate:
                      description: MetadataServiceTemplate - defines the metadata
                        serive dedicated for the cell.
                      properties:
                        apiDatabaseHostname:
                          description: 'APIDatabaseHostname - hostname to use when
                            accessing the API DB. This filed is Required if the CellName
                            is not provided TODO(gibi): Add a webhook to validate
                            the CellName constraint'
                          type: string
                        apiDatabaseUser:
                          default: nova
                          description: APIDatabaseUser - username to use when accessing
                            the API DB
                          type: string
                        cellDatabaseHostname:
                          description: 'This is unused if CellName is not provided.
                            But if it is provided then CellDatabaseHostName is also
                            Required. TODO(gibi): add webhook to validate this CellName
                            constraint CellDatabaseHostname - hostname to use when
                            accessing the cell DB'
                          type: string
                        cellDatabaseUser:
                          default: nova
                          description: CellDatabaseUser - username to use when accessing
                            the cell DB
                          type: string
                        cellMessageBusHostname:
                          description: 'This is unused if CellName is not provided.
                            But if it is provided then CellMessageBusHostname is required.
                            TODO(gibi): add webhook to validate this CellName constraint
                            CellMessageBusHostname - hostname to use when accessing
                            the cell message bus'
                          type: string
                        cellMessageBusUser:
                          default: nova
                          description: CellMessageBusUser - username to use when accessing
                            the cell message bus
                          type: string
                        cellName:
                          description: CellName is the name of the Nova Cell this
                            metadata service belongs to. If not provided then the
                            metadata serving every cells in the deployment
                          type: string
                        containerImage:
                          description: The service specific Container Image URL
                          type: string
                        customServiceConfig:
                          default: '# add your customization here'
                          description: CustomServiceConfig - customize the service
                            config using this parameter to change service defaults,
                            or overwrite rendered information using raw OpenStack
                            config format. The content gets added to to /etc/<service>/<service>.conf.d
                            directory as custom.conf file.
                          type: string
                        debug:
                          description: Debug - enable debug for different deploy stages.
                            If an init container is used, it runs and the actual action
                            pod gets started with sleep infinity
                          properties:
                            preserveJobs:
                              default: false
                              description: PreserveJobs - do not delete jobs after
                                they finished e.g. to check logs
                              type: boolean
                            stopDBSync:
                              default: false
                              description: 'StopDBSync allows stopping the init container
                                before running db sync to apply the DB schema QUESTION(gibi):
                                Not all CR will run dbsync, should we have per CR
                                Debug struct or keep this generic one and ignore fields
                                in the controller that are not applicable'
                              type: boolean
                            stopService:
                              default: false
                              description: 'StopService allows stopping the service
                                container before staring the openstack service binary
                                QUESTION(gibi): Not all CR will run a service, should
                                we have per CR Debug struct or keep this generic one
                                and ignore fields in the controller that are not applicable'
                              type: boolean
                          type: object
                        defaultConfigOverwrite:
                          additionalProperties:
                            type: string
                          description: ConfigOverwrite - interface to overwrite default
                            config files like e.g. logging.conf or policy.json. But
                            can also be used to add additional files. Those get added
                            to the service config dir in /etc/<service> .
                          type: object
                        keystoneAuthURL:
                          description: 'KeystoneAuthURL - the URL that the nova-metadata
                            service can use to talk to keystone NOTE(gibi): This is
                            made optional here to allow reusing the NovaMetadataSpec
                            struct in the Nova CR for the metadataServiceTemplate
                            field where this information is not yet known. We could
                            make this required via multiple options: a) create a NovaMetadataTemplate
                            that duplicates NovaMetadataSpec without this field. Use
                            NovaMetadataTemplate as type for metadataServiceTemplate
                            in NovaSpec. b) do a) but pull out a the fields to a base
                            struct that are used in both NovaMetadataSpec and NovaMetadataTemplate
                            c) add a validating webhook here that runs only when NovaMetadata
                            CR is created and does not run when Nova CR is created
                            and make this field required via that webhook.'
                          type: string
                        nodeSelector:
                          additionalProperties:
                            type: string
                          description: NodeSelector to target subset of worker nodes
                            running this service
                          type: object
                        passwordSelectors:
                          description: PasswordSelectors - Field names to identify
                            the passwords from the Secret
                          properties:
                            apiDatabase:
                              default: NovaAPIDatabasePassword
                              description: APIDatabase - the name of the field to
                                get the API DB password from the Secret
                              type: string
                            apiMessageBus:
                              default: NovaAPIMessageBusPassword
                              description: APIMessageBus - the name of the field to
                                get the API message bus password from the Secret
                              type: string
                            cellDatabase:
                              description: CellDatabase - the name of the field to
                                get the Cell DB password from the Secret
                              type: string
                            cellMessageBus:
                              description: CellMessageBus - the name of the field
                                to get the API message bus password from the Secret
                              type: string
                            service:
                              default: NovaPassword
                              description: Service - Selector to get the keystone
                                service user password from the Secret
                              type: string
                          type: object
                        replicas:
                          default: 1
                          description: Replicas of the service to run
                          format: int32
                          maximum: 32
                          minimum: 0
                          type: integer
                        resources:
                          description: Resources - Compute Resources required by this
                            service (Limits/Requests). https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/
                          properties:
                            limits:
                              additionalProperties:
                                anyOf:
                                - type: integer
                                - type: string
                                pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                x-kubernetes-int-or-string: true
                              description: 'Limits describes the maximum amount of
                                compute resources allowed. More info: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/'
                              type: object
                            requests:
                              additionalProperties:
                                anyOf:
                                - type: integer
                                - type: string
                                pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                x-kubernetes-int-or-string: true
                              description: 'Requests describes the minimum amount
                                of compute resources required. If Requests is omitted
                                for a container, it defaults to Limits if that is
                                explicitly specified, otherwise to an implementation-defined
                                value. More info: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/'
                              type: object
                          type: object
                        secret:
                          description: Secret is the name of the Secret instance containing
                            password information for the nova-conductor service.
                          type: string
                        serviceUser:
                          default: nova
                          description: ServiceUser - optional username used for this
                            service to register in keystone
                          type: string
                      required:
                      - containerImage
                      type: object
                    noVNCProxyServiceTemplate:
                      description: NoVNCProxyServiceTemplate - defines the novvncproxy
                        serive dedicated for the cell.
                      properties:
                        cellDatabaseHostname:
                          description: 'NOTE(gibi): This should be Required, see notes
                            in KeystoneAuthURL CellDatabaseHostname - hostname to
                            use when accessing the cell DB'
                          type: string
                        cellDatabaseUser:
                          default: nova
                          description: CellDatabaseUser - username to use when accessing
                            the cell DB
                          type: string
                        cellName:
                          description: CellName is the name of the Nova Cell this
                            novncproxy belongs to.
                          type: string
                        containerImage:
                          description: The service specific Container Image URL
                          type: string
                        customServiceConfig:
                          default: '# add your customization here'
                          description: CustomServiceConfig - customize the service
                            config using this parameter to change service defaults,
                            or overwrite rendered information using raw OpenStack
                            config format. The content gets added to to /etc/<service>/<service>.conf.d
                            directory as custom.conf file.
                          type: string
                        debug:
                          description: Debug - enable debug for different deploy stages.
                            If an init container is used, it runs and the actual action
                            pod gets started with sleep infinity
                          properties:
                            preserveJobs:
                              default: false
                              description: PreserveJobs - do not delete jobs after
                                they finished e.g. to check logs
                              type: boolean
                            stopDBSync:
                              default: false
                              description: 'StopDBSync allows stopping the init container
                                before running db sync to apply the DB schema QUESTION(gibi):
                                Not all CR will run dbsync, should we have per CR
                                Debug struct or keep this generic one and ignore fields
                                in the controller that are not applicable'
                              type: boolean
                            stopService:
                              default: false
                              description: 'StopService allows stopping the service
                                container before staring the openstack service binary
                                QUESTION(gibi): Not all CR will run a service, should
                                we have per CR Debug struct or keep this generic one
                                and ignore fields in the controller that are not applicable'
                              type: boolean
                          type: object
                        defaultConfigOverwrite:
                          additionalProperties:
                            type: string
                          description: ConfigOverwrite - interface to overwrite default
                            config files like e.g. logging.conf or policy.json. But
                            can also be used to add additional files. Those get added
                            to the service config dir in /etc/<service> .
                          type: object
                        keystoneAuthURL:
                          description: 'KeystoneAuthURL - the URL that the nova-novncproxy
                            service can use to talk to keystone NOTE(gibi): This is
                            made optional here to allow reusing the NovaNoVNCProxySpec
                            struct in the Nova CR via the NovaCell CR where this information
                            is not yet known. We could make this required via multiple
                            options: a) create a NovaNoVNCProxyTemplate that duplicates
                            NovaNoVNCProxySpec without this field. Use NovaNoVNCProxyTemplate
                            in NovaCellSpec. b) do a) but pull out a the fields to
                            a base struct that are used in both NovaNoVNCPRoxySpec
                            and NovaNoVNCProxyTemplate c) add a validating webhook
                            here that runs only when NovaNoVNCProxy CR is created
                            and does not run when Nova CR is created and make this
                            field required via that webhook.'
                          type: string
                        nodeSelector:
                          additionalProperties:
                            type: string
                          description: NodeSelector to target subset of worker nodes
                            running this service
                          type: object
                        passwordSelectors:
                          description: PasswordSelectors - Field names to identify
                            the passwords from the Secret
                          properties:
                            apiDatabase:
                              default: NovaAPIDatabasePassword
                              description: APIDatabase - the name of the field to
                                get the API DB password from the Secret
                              type: string
                            apiMessageBus:
                              default: NovaAPIMessageBusPassword
                              description: APIMessageBus - the name of the field to
                                get the API message bus password from the Secret
                              type: string
                            cellDatabase:
                              description: CellDatabase - the name of the field to
                                get the Cell DB password from the Secret
                              type: string
                            cellMessageBus:
                              description: CellMessageBus - the name of the field
                                to get the API message bus password from the Secret
                              type: string
                            service:
                              default: NovaPassword
                              description: Service - Selector to get the keystone
                                service user password from the Secret
                              type: string
                          type: object
                        replicas:
                          default: 1
                          description: Replicas of the service to run
                          format: int32
                          maximum: 32
                          minimum: 0
                          type: integer
                        resources:
                          description: Resources - Compute Resources required by this
                            service (Limits/Requests). https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/
                          properties:
                            limits:
                              additionalProperties:
                                anyOf:
                                - type: integer
                                - type: string
                                pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                x-kubernetes-int-or-string: true
                              description: 'Limits describes the maximum amount of
                                compute resources allowed. More info: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/'
                              type: object
                            requests:
                              additionalProperties:
                                anyOf:
                                - type: integer
                                - type: string
                                pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                x-kubernetes-int-or-string: true
                              description: 'Requests describes the minimum amount
                                of compute resources required. If Requests is omitted
                                for a container, it defaults to Limits if that is
                                explicitly specified, otherwise to an implementation-defined
                                value. More info: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/'
                              type: object
                          type: object
                        secret:
                          description: Secret is the name of the Secret instance containing
                            password information for the nova-conductor service.
                          type: string
                        serviceUser:
                          default: nova
                          description: ServiceUser - optional username used for this
                            service to register in keystone
                          type: string
                      required:
                      - containerImage
                      type: object
                    passwordSelectors:
                      description: PasswordSelectors - Field names to identify the
                        passwords from the Secret
                      properties:
                        apiDatabase:
                          default: NovaAPIDatabasePassword
                          description: APIDatabase - the name of the field to get
                            the API DB password from the Secret
                          type: string
                        apiMessageBus:
                          default: NovaAPIMessageBusPassword
                          description: APIMessageBus - the name of the field to get
                            the API message bus password from the Secret
                          type: string
                        cellDatabase:
                          description: CellDatabase - the name of the field to get
                            the Cell DB password from the Secret
                          type: string
                        cellMessageBus:
                          description: CellMessageBus - the name of the field to get
                            the API message bus password from the Secret
                          type: string
                        service:
                          default: NovaPassword
                          description: Service - Selector to get the keystone service
                            user password from the Secret
                          type: string
                      type: object
                    secret:
                      description: Secret is the name of the Secret instance containing
                        password information for the nova cell.
                      type: string
                    serviceUser:
                      default: nova
                      description: ServiceUser - optional username used for this service
                        to register in keystone
                      type: string
                  required:
                  - conductorServiceTemplate
                  type: object
                description: Cells is a mapping of cell names to NovaCell objects
                  defining the cells in the deployment. The "cell0" cell is a mandatory
                  cell in every deployment. Moreover any real deployment needs at
                  least one additional normal cell as "cell0" cannot have any computes.
                type: object
              debug:
                description: Debug - enable debug for different deploy stages. If
                  an init container is used, it runs and the actual action pod gets
                  started with sleep infinity
                properties:
                  preserveJobs:
                    default: false
                    description: PreserveJobs - do not delete jobs after they finished
                      e.g. to check logs
                    type: boolean
                  stopDBSync:
                    default: false
                    description: 'StopDBSync allows stopping the init container before
                      running db sync to apply the DB schema QUESTION(gibi): Not all
                      CR will run dbsync, should we have per CR Debug struct or keep
                      this generic one and ignore fields in the controller that are
                      not applicable'
                    type: boolean
                  stopService:
                    default: false
                    description: 'StopService allows stopping the service container
                      before staring the openstack service binary QUESTION(gibi):
                      Not all CR will run a service, should we have per CR Debug struct
                      or keep this generic one and ignore fields in the controller
                      that are not applicable'
                    type: boolean
                type: object
              keystoneServiceSelector:
                additionalProperties:
                  type: string
                description: KeystoneServiceSelector to select the Keystone Service
                  instance used by the Nova services to authenticate.
                type: object
              metadataServiceTemplate:
                description: MetadataServiceTemplate - defines the metadata service
                  that is global for the deployment serving all the cells.
                properties:
                  apiDatabaseHostname:
                    description: 'APIDatabaseHostname - hostname to use when accessing
                      the API DB. This filed is Required if the CellName is not provided
                      TODO(gibi): Add a webhook to validate the CellName constraint'
                    type: string
                  apiDatabaseUser:
                    default: nova
                    description: APIDatabaseUser - username to use when accessing
                      the API DB
                    type: string
                  cellDatabaseHostname:
                    description: 'This is unused if CellName is not provided. But
                      if it is provided then CellDatabaseHostName is also Required.
                      TODO(gibi): add webhook to validate this CellName constraint
                      CellDatabaseHostname - hostname to use when accessing the cell
                      DB'
                    type: string
                  cellDatabaseUser:
                    default: nova
                    description: CellDatabaseUser - username to use when accessing
                      the cell DB
                    type: string
                  cellMessageBusHostname:
                    description: 'This is unused if CellName is not provided. But
                      if it is provided then CellMessageBusHostname is required. TODO(gibi):
                      add webhook to validate this CellName constraint CellMessageBusHostname
                      - hostname to use when accessing the cell message bus'
                    type: string
                  cellMessageBusUser:
                    default: nova
                    description: CellMessageBusUser - username to use when accessing
                      the cell message bus
                    type: string
                  cellName:
                    description: CellName is the name of the Nova Cell this metadata
                      service belongs to. If not provided then the metadata serving
                      every cells in the deployment
                    type: string
                  containerImage:
                    description: The service specific Container Image URL
                    type: string
                  customServiceConfig:
                    default: '# add your customization here'
                    description: CustomServiceConfig - customize the service config
                      using this parameter to change service defaults, or overwrite
                      rendered information using raw OpenStack config format. The
                      content gets added to to /etc/<service>/<service>.conf.d directory
                      as custom.conf file.
                    type: string
                  debug:
                    description: Debug - enable debug for different deploy stages.
                      If an init container is used, it runs and the actual action
                      pod gets started with sleep infinity
                    properties:
                      preserveJobs:
                        default: false
                        description: PreserveJobs - do not delete jobs after they
                          finished e.g. to check logs
                        type: boolean
                      stopDBSync:
                        default: false
                        description: 'StopDBSync allows stopping the init container
                          before running db sync to apply the DB schema QUESTION(gibi):
                          Not all CR will run dbsync, should we have per CR Debug
                          struct or keep this generic one and ignore fields in the
                          controller that are not applicable'
                        type: boolean
                      stopService:
                        default: false
                        description: 'StopService allows stopping the service container
                          before staring the openstack service binary QUESTION(gibi):
                          Not all CR will run a service, should we have per CR Debug
                          struct or keep this generic one and ignore fields in the
                          controller that are not applicable'
                        type: boolean
                    type: object
                  defaultConfigOverwrite:
                    additionalProperties:
                      type: string
                    description: ConfigOverwrite - interface to overwrite default
                      config files like e.g. logging.conf or policy.json. But can
                      also be used to add additional files. Those get added to the
                      service config dir in /etc/<service> .
                    type: object
                  keystoneAuthURL:
                    description: 'KeystoneAuthURL - the URL that the nova-metadata
                      service can use to talk to keystone NOTE(gibi): This is made
                      optional here to allow reusing the NovaMetadataSpec struct in
                      the Nova CR for the metadataServiceTemplate field where this
                      information is not yet known. We could make this required via
                      multiple options: a) create a NovaMetadataTemplate that duplicates
                      NovaMetadataSpec without this field. Use NovaMetadataTemplate
                      as type for metadataServiceTemplate in NovaSpec. b) do a) but
                      pull out a the fields to a base struct that are used in both
                      NovaMetadataSpec and NovaMetadataTemplate c) add a validating
                      webhook here that runs only when NovaMetadata CR is created
                      and does not run when Nova CR is created and make this field
                      required via that webhook.'
                    type: string
                  nodeSelector:
                    additionalProperties:
                      type: string
                    description: NodeSelector to target subset of worker nodes running
                      this service
                    type: object
                  passwordSelectors:
                    description: PasswordSelectors - Field names to identify the passwords
                      from the Secret
                    properties:
                      apiDatabase:
                        default: NovaAPIDatabasePassword
                        description: APIDatabase - the name of the field to get the
                          API DB password from the Secret
                        type: string
                      apiMessageBus:
                        default: NovaAPIMessageBusPassword
                        description: APIMessageBus - the name of the field to get
                          the API message bus password from the Secret
                        type: string
                      cellDatabase:
                        description: CellDatabase - the name of the field to get the
                          Cell DB password from the Secret
                        type: string
                      cellMessageBus:
                        description: CellMessageBus - the name of the field to get
                          the API message bus password from the Secret
                        type: string
                      service:
                        default: NovaPassword
                        description: Service - Selector to get the keystone service
                          user password from the Secret
                        type: string
                    type: object
                  replicas:
                    default: 1
                    description: Replicas of the service to run
                    format: int32
                    maximum: 32
                    minimum: 0
                    type: integer
                  resources:
                    description: Resources - Compute Resources required by this service
                      (Limits/Requests). https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/
                    properties:
                      limits:
                        additionalProperties:
                          anyOf:
                          - type: integer
                          - type: string
                          pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                          x-kubernetes-int-or-string: true
                        description: 'Limits describes the maximum amount of compute
                          resources allowed. More info: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/'
                        type: object
                      requests:
                        additionalProperties:
                          anyOf:
                          - type: integer
                          - type: string
                          pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                          x-kubernetes-int-or-string: true
                        description: 'Requests describes the minimum amount of compute
                          resources required. If Requests is omitted for a container,
                          it defaults to Limits if that is explicitly specified, otherwise
                          to an implementation-defined value. More info: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/'
                        type: object
                    type: object
                  secret:
                    description: Secret is the name of the Secret instance containing
                      password information for the nova-conductor service.
                    type: string
                  serviceUser:
                    default: nova
                    description: ServiceUser - optional username used for this service
                      to register in keystone
                    type: string
                required:
                - containerImage
                type: object
              passwordSelectors:
                description: PasswordSelectors - Selectors to identify the DB and
                  ServiceUser passwords from the Secret
                properties:
                  apiDatabase:
                    default: NovaAPIDatabasePassword
                    description: APIDatabase - the name of the field to get the API
                      DB password from the Secret
                    type: string
                  apiMessageBus:
                    default: NovaAPIMessageBusPassword
                    description: APIMessageBus - the name of the field to get the
                      API message bus password from the Secret
                    type: string
                  cellDatabase:
                    description: CellDatabase - the name of the field to get the Cell
                      DB password from the Secret
                    type: string
                  cellMessageBus:
                    description: CellMessageBus - the name of the field to get the
                      API message bus password from the Secret
                    type: string
                  service:
                    default: NovaPassword
                    description: Service - Selector to get the keystone service user
                      password from the Secret
                    type: string
                type: object
              schedulerServiceTemplate:
                description: SchedulerServiceTemplate- define the nova-scheduler service
                properties:
                  apiDatabaseHostname:
                    description: 'NOTE(gibi): This should be Required, see notes in
                      KeystoneAuthURL APIDatabaseHostname - hostname to use when accessing
                      the API DB'
                    type: string
                  apiDatabaseUser:
                    default: nova
                    description: APIDatabaseUser - username to use when accessing
                      the API DB
                    type: string
                  apiMessageBusHostname:
                    description: 'NOTE(gibi): This should be Required, see notes in
                      KeystoneAuthURL APIMessageBusHostname - hostname to use when
                      accessing the API message bus'
                    type: string
                  apiMessageBusUser:
                    default: nova
                    description: APIMessageBusUser - username to use when accessing
                      the API message bus
                    type: string
                  containerImage:
                    description: The service specific Container Image URL
                    type: string
                  customServiceConfig:
                    default: '# add your customization here'
                    description: CustomServiceConfig - customize the service config
                      using this parameter to change service defaults, or overwrite
                      rendered information using raw OpenStack config format. The
                      content gets added to to /etc/<service>/<service>.conf.d directory
                      as custom.conf file.
                    type: string
                  debug:
                    description: Debug - enable debug for different deploy stages.
                      If an init container is used, it runs and the actual action
                      pod gets started with sleep infinity
                    properties:
                      preserveJobs:
                        default: false
                        description: PreserveJobs - do not delete jobs after they
                          finished e.g. to check logs
                        type: boolean
                      stopDBSync:
                        default: false
                        description: 'StopDBSync allows stopping the init container
                          before running db sync to apply the DB schema QUESTION(gibi):
                          Not all CR will run dbsync, should we have per CR Debug
                          struct or keep this generic one and ignore fields in the
                          controller that are not applicable'
                        type: boolean
                      stopService:
                        default: false
                        description: 'StopService allows stopping the service container
                          before staring the openstack service binary QUESTION(gibi):
                          Not all CR will run a service, should we have per CR Debug
                          struct or keep this generic one and ignore fields in the
                          controller that are not applicable'
                        type: boolean
                    type: object
                  defaultConfigOverwrite:
                    additionalProperties:
                      type: string
                    description: ConfigOverwrite - interface to overwrite default
                      config files like e.g. logging.conf or policy.json. But can
                      also be used to add additional files. Those get added to the
                      service config dir in /etc/<service> .
                    type: object
                  keystoneAuthURL:
                    description: 'KeystoneAuthURL - the URL that the nova-scheduler
                      service can use to talk to keystone NOTE(gibi): This is made
                      optional here to allow reusing the NovaSchedulerSpec struct
                      in the Nova CR for the schedulerServiceTemplate field where
                      this information is not yet known. We could make this \ required
                      via multiple options: a) create a NovaSchedulerTemplate that
                      duplicates NovaSchedulerSpec without this field. Use NovaSchedulerTemplate
                      as type for schedulerServiceTemplate in NovaSpec. b) do a) but
                      pull out a the fields to a base struct that are used in both
                      NovaSchedulerSpec and NovaSchedulerTemplate c) add a validating
                      webhook here that runs only when NovaScheduler CR is created
                      and does not run when Nova CR is created and make this field
                      required via that webhook.'
                    type: string
                  nodeSelector:
                    additionalProperties:
                      type: string
                    description: NodeSelector to target subset of worker nodes running
                      this service
                    type: object
                  passwordSelectors:
                    description: PasswordSelectors - Field names to identify the passwords
                      from the Secret
                    properties:
                      apiDatabase:
                        default: NovaAPIDatabasePassword
                        description: APIDatabase - the name of the field to get the
                          API DB password from the Secret
                        type: string
                      apiMessageBus:
                        default: NovaAPIMessageBusPassword
                        description: APIMessageBus - the name of the field to get
                          the API message bus password from the Secret
                        type: string
                      cellDatabase:
                        description: CellDatabase - the name of the field to get the
                          Cell DB password from the Secret
                        type: string
                      cellMessageBus:
                        description: CellMessageBus - the name of the field to get
                          the API message bus password from the Secret
                        type: string
                      service:
                        default: NovaPassword
                        description: Service - Selector to get the keystone service
                          user password from the Secret
                        type: string
                    type: object
                  replicas:
                    default: 1
                    description: Replicas of the service to run
                    format: int32
                    maximum: 32
                    minimum: 0
                    type: integer
                  resources:
                    description: Resources - Compute Resources required by this service
                      (Limits/Requests). https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/
                    properties:
                      limits:
                        additionalProperties:
                          anyOf:
                          - type: integer
                          - type: string
                          pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                          x-kubernetes-int-or-string: true
                        description: 'Limits describes the maximum amount of compute
                          resources allowed. More info: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/'
                        type: object
                      requests:
                        additionalProperties:
                          anyOf:
                          - type: integer
                          - type: string
                          pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                          x-kubernetes-int-or-string: true
                        description: 'Requests describes the minimum amount of compute
                          resources required. If Requests is omitted for a container,
                          it defaults to Limits if that is explicitly specified, otherwise
                          to an implementation-defined value. More info: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/'
                        type: object
                    type: object
                  secret:
                    description: Secret is the name of the Secret instance containing
                      password information for the nova-scheduler sevice.
                    type: string
                  serviceUser:
                    default: nova
                    description: ServiceUser - optional username used for this service
                      to register in keystone
                    type: string
                required:
                - containerImage
                type: object
              secret:
                description: Secret is the name of the Secret instance containing
                  password information for nova like the keystone service password
                  and DB passwords
                type: string
              serviceUser:
                default: nova
                description: ServiceUser - optional username used for this service
                  to register in keystone
                type: string
            required:
            - apiServiceTemplate
            - cellTemplates
            - schedulerServiceTemplate
            type: object
          status:
            description: NovaStatus defines the observed state of Nova
            properties:
              apiServiceReadyCount:
                description: APIServiceReadyCount defines the number or replicas ready
                  from nova-api
                format: int32
                type: integer
              conditions:
                description: Conditions
                items:
                  description: Condition defines an observation of a API resource
                    operational state.
                  properties:
                    lastTransitionTime:
                      description: Last time the condition transitioned from one status
                        to another. This should be when the underlying condition changed.
                        If that is not known, then using the time when the API field
                        changed is acceptable.
                      format: date-time
                      type: string
                    message:
                      description: A human readable message indicating details about
                        the transition.
                      type: string
                    reason:
                      description: The reason for the condition's last transition
                        in CamelCase.
                      type: string
                    severity:
                      description: Severity provides a classification of Reason code,
                        so the current situation is immediately understandable and
                        could act accordingly. It is meant for situations where Status=False
                        and it should be indicated if it is just informational, warning
                        (next reconciliation might fix it) or an error (e.g. DB create
                        issue and no actions to automatically resolve the issue can/should
                        be done). For conditions where Status=Unknown or Status=True
                        the Severity should be SeverityNone.
                      type: string
                    status:
                      description: Status of the condition, one of True, False, Unknown.
                      type: string
                    type:
                      description: Type of condition in CamelCase.
                      type: string
                  required:
                  - lastTransitionTime
                  - status
                  - type
                  type: object
                type: array
              hash:
                additionalProperties:
                  type: string
                description: Map of hashes to track e.g. job status
                type: object
              metadataServiceReadyCount:
                description: MetadataReadyCount defines the number of replicas ready
                  from nova-metadata service
                format: int32
                type: integer
              schedulerServiceReadyCount:
                description: SchedulerServiceReadyCount defines the number or replicas
                  ready from nova-scheduler
                format: int32
                type: integer
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
